<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>ST_DropBBox</title><link rel="stylesheet" href="style.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="PostGIS 1.4 Manual"><link rel="up" href="ch07.html#Exceptional_Functions" title="7.12. Exceptional Functions"><link rel="prev" href="ST_AddBBox.html" title="ST_AddBBox"><link rel="next" href="ST_HasBBox.html" title="ST_HasBBox"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">ST_DropBBox</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ST_AddBBox.html">Prev</a> </td><th width="60%" align="center">7.12. Exceptional Functions</th><td width="20%" align="right"> <a accesskey="n" href="ST_HasBBox.html">Next</a></td></tr></table><hr></div><div class="refentry" title="ST_DropBBox"><a name="ST_DropBBox"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_DropBBox &#8212; Drop the bounding box cache from the geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_DropBBox</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="id459039"></a><h2>Description</h2><p>Drop the bounding box cache from the geometry. This reduces
			geometry size, but makes bounding-box based queries slower.  It is also used to drop a corrupt bounding box.  A tale-tell sign of a corrupt cached bounding box
				is when your ST_Intersects and other relation queries leave out geometries that rightfully should return true.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Bounding boxes are automatically added to geometries and improve speed of queries so in general this is not needed
				unless the generated bounding box somehow becomes corrupted or you have an old install that is lacking bounding boxes.
				Then you need to drop the old and readd.  This kind of corruption has been observed in 8.3-8.3.6 series whereby cached bboxes were not always recalculated when a geometry changed and upgrading to a newer version without a dump reload will not
				correct already corrupted boxes.  So one can manually correct using below and readd the bbox or do a dump reload.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method supports Circular Strings and curves </p></div><div class="refsection" title="Examples"><a name="id459079"></a><h2>Examples</h2><pre class="programlisting">--This example drops bounding boxes where the cached box is not correct
			--The force to ST_AsBinary before applying ST_box2D forces a recalculation of the box, and ST_Box2D applied to the table geometry always
			-- returns the cached bounding box.
			UPDATE sometable
 SET the_geom =  ST_DropBBox(the_geom)
 WHERE Not (ST_Box2D(ST_AsBinary(the_geom)) = ST_Box2D(the_geom));

	UPDATE sometable
 SET the_geom =  ST_AddBBox(the_geom)
 WHERE Not ST_HasBBOX(the_geom);


 </pre></div><div class="refsection" title="See Also"><a name="id459099"></a><h2>See Also</h2><p><a class="xref" href="ST_AddBBox.html" title="ST_AddBBox">ST_AddBBox</a>, <a class="xref" href="ST_HasBBox.html" title="ST_HasBBox">ST_HasBBox</a>, <a class="xref" href="ST_Box2D.html" title="ST_Box2D">ST_Box2D</a></p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ST_AddBBox.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch07.html#Exceptional_Functions">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ST_HasBBox.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">ST_AddBBox </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> ST_HasBBox</td></tr></table></div></body></html>
